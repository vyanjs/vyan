!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).vyan={})}(this,(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&s(r,n.prototype),r}).apply(null,arguments)}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return u(e,arguments,o(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),s(i,e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?v(e):t}
/**
   * @license Event
   * Visit http://createjs.com/ for documentation, updates and examples.
   *
   * Copyright (c) 2017 gskinner.com, inc.
   *
   * Permission is hereby granted, free of charge, to any person
   * obtaining a copy of this software and associated documentation
   * files (the "Software"), to deal in the Software without
   * restriction, including without limitation the rights to use,
   * copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the
   * Software is furnished to do so, subject to the following
   * conditions:
   *
   * The above copyright notice and this permission notice shall be
   * included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
   * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
   * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
   * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
   * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
   * OTHER DEALINGS IN THE SOFTWARE.
   */var h=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(this,e),this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=i,this.cancelable=r,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}return r(e,[{key:"preventDefault",value:function(){return this.defaultPrevented=this.cancelable,this}},{key:"stopPropagation",value:function(){return this.propagationStopped=!0,this}},{key:"stopImmediatePropagation",value:function(){return this.immediatePropagationStopped=this.propagationStopped=!0,this}},{key:"remove",value:function(){return this.removed=!0,this}},{key:"clone",value:function(){var t=new e(this.type,this.bubbles,this.cancelable);for(var n in this)this.hasOwnProperty(n)&&(t[n]=this[n]);return t}},{key:"set",value:function(e){for(var t in e)this[t]=e[t];return this}},{key:"toString",value:function(){return"[".concat(this.constructor.name," (type=").concat(this.type,")]")}}]),e}(),d=function(){function e(){n(this,e),this._listeners=null,this._captureListeners=null}return r(e,null,[{key:"initialize",value:function(t){var n=e.prototype;t.addEventListener=n.addEventListener,t.on=n.on,t.removeEventListener=t.off=n.removeEventListener,t.removeAllEventListeners=n.removeAllEventListeners,t.hasEventListener=n.hasEventListener,t.dispatchEvent=n.dispatchEvent,t._dispatchEvent=n._dispatchEvent,t.willTrigger=n.willTrigger}}]),r(e,[{key:"addEventListener",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[e];return r&&(this.removeEventListener(e,t,i),r=n[e]),r?r.push(t):n[e]=[t],t}},{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,(function(e){t.call(n,e,r),i&&e.remove()}),a)}},{key:"removeEventListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n?this._captureListeners:this._listeners;if(i){var r=i[e];if(r)for(var a=r.length,o=0;o<a;o++)if(r[o]===t){1===a?delete i[e]:r.splice(o,1);break}}}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.removeEventListener(e,t,n)}},{key:"removeAllEventListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null}},{key:"dispatchEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"==typeof e){var i=this._listeners;if(!(t||i&&i[e]))return!0;e=new h(e,t,n)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(e){}if(e.bubbles&&this.parent){for(var r=this,a=[r];r.parent;)a.push(r=r.parent);var o,s=a.length;for(o=s-1;o>=0&&!e.propagationStopped;o--)a[o]._dispatchEvent(e,1+(0==o));for(o=1;o<s&&!e.propagationStopped;o++)a[o]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return!e.defaultPrevented}},{key:"hasEventListener",value:function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])}},{key:"willTrigger",value:function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1}},{key:"toString",value:function(){return"[".concat(this.constructor.name+this.name?" ".concat(this.name):"","]")}},{key:"_dispatchEvent",value:function(e,t){var n=1===t?this._captureListeners:this._listeners;if(e&&n){var i,r=n[e.type];if(!r||0===(i=r.length))return;try{e.currentTarget=this}catch(e){}try{e.eventPhase=t}catch(e){}e.removed=!1,r=r.slice();for(var a=0;a<i&&!e.immediatePropagationStopped;a++){var o=r[a];o.handleEvent?o.handleEvent(e):o(e),e.removed&&(this.off(e.type,o,1===t),e.removed=!1)}}}}]),e}(),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n(this,e),this.routes=t}return r(e,[{key:"addRoute",value:function(e,t,n,i){var r={};r.navEvent=e,r.viewstackId=t,r.viewId=n,r.path=i,this.routes.push(r)}},{key:"findRoute",value:function(e){for(var t=[],n=0;n<this.routes.length;n++)this.routes[n].navEvent==e&&(t=this.routes[n]);return t}},{key:"findViewId",value:function(e,t){for(var n=[],i=0;i<this.routes.length;i++)this.routes[i].navEvent==e&&this.routes[i].path==t&&(n=this.routes[i].viewId);return n}},{key:"findViewStackId",value:function(e,t){for(var n=null,i=0;i<this.routes.length;i++)this.routes[i].navEvent==e&&this.routes[i].path==t&&(n=this.routes[i].viewstackId);return n}},{key:"reset",value:function(){this.routes=[]}},{key:"printRoutes",value:function(){if(this.routes.length>0)for(var e=0;e<this.routes.length;e++)console.log("navEvent:"+this.routes[e].navEvent+" viewstackId:"+this.routes[e].viewstackId+" viewId:"+this.routes[e].viewId);else console.log("No Routes Found")}}]),e}(),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n(this,e),this.routes=t}return r(e,[{key:"addRoute",value:function(e,t,n){var i={};i.path=e,i.navigatorId=t,i.parentId=n,this.routes.push(i)}},{key:"findNavigator",value:function(e){for(var t=[],n=0;n<this.routes.length;n++)this.routes[n].path===e&&t.push(this.routes[n].navigatorId);return t}},{key:"findNavigatorParent",value:function(e){for(var t="root",n=0;n<this.routes.length;n++)this.routes[n].navigatorId===e&&(t=this.routes[n].parentId);return t}},{key:"findViewStack",value:function(e){for(var t=null,n=0;n<this.routes.length;n++)this.routes[n].path==e&&(t=this.routes[n].viewstackId);return t}},{key:"reset",value:function(){this.routes=[]}},{key:"printRoutes",value:function(){if(this.routes.length>0)for(var e=0;e<this.routes.length;e++)console.log("path:"+this.routes[e].path+" navigatorId:"+this.routes[e].navigatorId);else console.log("No Routes Found")}}]),e}(),g=function(){function e(){n(this,e)}return r(e,null,[{key:"FORGOTPWD_NAV_EVENT",get:function(){return"Forgotpwd_Nav_Event"}},{key:"REGISTER_NAV_EVENT",get:function(){return"Register_Nav_Event"}},{key:"BACK_NAV_EVENT",get:function(){return"Back_Nav_Event"}},{key:"NAV_CHANGE_EVENT",get:function(){return"navigation_change_event"}},{key:"INITIALIZE_EVENT",get:function(){return"initialize_event"}},{key:"ATTACHED_EVENT",get:function(){return"attached_event"}},{key:"DETACHED_EVENT",get:function(){return"detached_event"}},{key:"ACTIVATE_EVENT",get:function(){return"activate_event"}},{key:"DEACTIVATE_EVENT",get:function(){return"deactivate_event"}},{key:"CHANGE",get:function(){return"change"}},{key:"CLICK",get:function(){return"click"}},{key:"VIEW_EVENT",get:function(){return"view_event"}},{key:"MODEL_EVENT",get:function(){return"model_event"}},{key:"COMPONENT_EVENT",get:function(){return"component_event"}}]),e}(),p=function(e){function t(e){var i;return n(this,t),(i=l(this,o(t).call(this))).id=e,i}return a(t,e),t}(d),k=new(function(){function e(){return n(this,e),e.instance||(e.instance=this,this.appEvtChannel=new p("APPLICATIONEVENT"),this.navEvtChannel=new p("NAVIGATIONEVENT")),e.instance}return r(e,[{key:"appEventChannel",get:function(){return this.appEvtChannel}},{key:"navEventChannel",get:function(){return this.navEvtChannel}}]),e}());Object.freeze(k);var E=function(e){function t(e,i,r,a,s,u){var c;return n(this,t),(c=l(this,o(t).call(this,e,s,u))).type=e,c.eventName=i,c.params=r,c.route=a,c}return a(t,e),r(t,[{key:"clone",value:function(){return new t(this.type,this.eventName,this.params,this.route,this.bubbles,this.cancelable)}}]),t}(h),w=new(function(){function e(){return n(this,e),e.instance||(e.instance=this,this.counter=0),e.instance}return r(e,[{key:"generate",get:function(){return this.counter++}}]),e}()),m=function(){function e(){n(this,e)}return r(e,null,[{key:"component",value:function(t,n){return e.view(n).querySelector(".vjs-component."+t)}},{key:"container",value:function(t,n){return e.view(n).querySelector(".vjs-container."+t)}},{key:"view",value:function(e){return document.querySelector(".vjs-view."+e)}},{key:"viewStack",value:function(e){return document.querySelector(".vjs-viewstack."+e)}},{key:"viewNavigator",value:function(e){return document.querySelector(".vjs-viewnavigator."+e)}},{key:"constructComponentBaseElement",value:function(e){return'<div class="vjs-component '.concat(e,'"></div>')}},{key:"constructContainerBaseElement",value:function(e){return'<div class="vjs-container '.concat(e,'"></div>')}},{key:"constructViewBaseElement",value:function(e){return'<div class="vjs-view '.concat(e,'"></div>')}},{key:"constructViewStackBaseElement",value:function(e){return'<div class="vjs-viewstack '.concat(e,'"></div>')}},{key:"constructNavigatorBaseElement",value:function(e){return'<div class="vjs-viewnavigator '.concat(e,'"></div>')}},{key:"hideElement",value:function(e){e.style.display="none"}},{key:"showElement",value:function(e){e.style.display="block"}},{key:"isVisible",value:function(e){return"block"==e.style.display}},{key:"generateComponentId",value:function(){return"component"+w.generate}},{key:"generateContainerId",value:function(){return"container"+w.generate}}]),e}(),b=function(e){function t(e,i,r,a,s){var u;return n(this,t),(u=l(this,o(t).call(this))).id=e,u.route=i,u.navEvent=r,u.navParams=a,u.parentViewStackId=s,u.navigatorContainerId=null,u.isAttached=!1,u.isActive=!1,u.initView(),u}return a(t,e),r(t,[{key:"dispatchNavBackEvent",value:function(e){e.preventDefault();var t=new E(g.NAV_CHANGE_EVENT,g.BACK_NAV_EVENT,null,this.route);k.navEventChannel.dispatchEvent(t)}},{key:"initView",value:function(){}},{key:"createViewContent",value:function(){}},{key:"addViewHandler",value:function(){}},{key:"removeViewHandler",value:function(){}},{key:"bindView",value:function(){}},{key:"unBindView",value:function(){}},{key:"destroy",value:function(){}},{key:"attachView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.isAttached){var t=e;null==t&&(t=m.viewStack(this.parentViewStackId)),t.insertAdjacentHTML("beforeend",m.constructViewBaseElement(this.id)),this.isAttached=!0;var n=this.getViewElement();m.hideElement(n),this.createViewContent(),this.addViewHandler(),this.bindView(),this.dispatchEvent(g.ATTACHED_EVENT)}}},{key:"activateView",value:function(){if(!this.isActive){var e=this.getViewElement();m.showElement(e),this.isActive=!0}}},{key:"deActivateView",value:function(){if(this.isActive){var e=this.getViewElement();m.hideElement(e),this.isActive=!1}}},{key:"detachView",value:function(){if(this.isAttached){this.unBindView(),this.removeViewHandler();var e=this.getViewElement();e.parentNode.removeChild(e),this.isAttached=!1,this.dispatchEvent(g.DETACHED_EVENT)}}},{key:"refreshView",value:function(){}},{key:"getViewElement",value:function(){var e=null;return this.isAttached&&(e=m.view(this.id)),e}},{key:"getNavContainerId",value:function(){return this.navigatorContainerId}},{key:"addToViewElement",value:function(e){this.getViewElement().insertAdjacentHTML("beforeend",e)}}]),t}(d),N=function(){function e(){n(this,e)}return r(e,null,[{key:"LOADING",get:function(){return"loading"}},{key:"LOADED",get:function(){return"loaded"}},{key:"SUCCESS",get:function(){return"success"}},{key:"ERROR",get:function(){return"error"}},{key:"WARNING",get:function(){return"warning"}},{key:"READONLY",get:function(){return"readonly"}},{key:"ENABLED",get:function(){return"enabled"}},{key:"DISABLED",get:function(){return"disabled"}},{key:"DEFAULT",get:function(){return"default"}}]),e}(),V=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return n(this,t),(e=l(this,o(t).call(this))).isEnabled=!0,e.isAttached=!1,e.elState=N.DEFAULT,e.isRequired=!1,e.isReadOnly=!1,e.createDOMElement=s,e.id=i,e.formId="defaultform",null!=i&&""!=i||(e.id=m.generateComponentId()),e.parentViewId=r,e.parentContainerId=a,e}return a(t,e),r(t,[{key:"init",value:function(){this.initComponent()}},{key:"initComponent",value:function(){}},{key:"createDOMContent",value:function(){}},{key:"addToComponentElement",value:function(e){this.componentElement.insertAdjacentHTML("beforeend",e)}},{key:"addEventHandler",value:function(){}},{key:"removeEventHandler",value:function(){}},{key:"bind",value:function(){}},{key:"unBind",value:function(){}},{key:"changeState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.elState=e,this.changeComponentState()}},{key:"changeComponentState",value:function(){}},{key:"setComponentRequired",value:function(){}},{key:"setComponentReadOnly",value:function(){}},{key:"setComponentEnabled",value:function(){}},{key:"attach",value:function(){if(!this.isAttached){if(this.isAttached=!0,1==this.createDOMElement){m.container(this.parentContainerId,this.parentViewId).insertAdjacentHTML("beforeend",m.constructComponentBaseElement(this.id));var e=this.componentElement;m.hideElement(e),this.createDOMContent()}this.addEventHandler(),this.bind(),this.enabled=!0,this.visible=!0,this.dispatchEvent(g.ATTACHED_EVENT)}}},{key:"detach",value:function(){if(this.isAttached){this.unBind(),this.removeEventHandler();var e=this.componentElement;e.parentNode.removeChild(e),this.isAttached=!1,this.dispatchEvent(g.DETACHED_EVENT)}}},{key:"refresh",value:function(){}},{key:"destroy",value:function(){}},{key:"componentElement",get:function(){var e=null;return this.isAttached&&(e=m.component(this.id,this.parentViewId)),e}},{key:"parentView",get:function(){return this.parentViewId}},{key:"parentContainer",get:function(){return this.parentContainerId}},{key:"currentState",get:function(){return this.elState}},{key:"required",get:function(){return this.isRequired},set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isRequired=e,this.setComponentRequired()}},{key:"readOnly",get:function(){return this.isReadOnly},set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isReadOnly=e,1==this.isReadOnly?this.changeState(N.READONLY):this.changeState(N.DEFAULT),this.setComponentReadOnly()}},{key:"enabled",get:function(){return this.isEnabled},set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isEnabled=e,this.setComponentEnabled()}},{key:"visible",get:function(){var e=this.componentElement;return m.isVisible(e)},set:function(e){var t=this.componentElement;e?m.showElement(t):m.hideElement(t)}}]),t}(d),A=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n(this,t),(e=l(this,o(t).call(this))).isEnabled=!1,e.createDOMElement=a,e.id=i,null!=i&&""!=i||(e.id=m.generateContainerId()),e.parentViewId=r,e}return a(t,e),r(t,[{key:"initContainer",value:function(){}},{key:"init",value:function(){this.initContainer()}},{key:"createDOMContent",value:function(){}},{key:"attach",value:function(){if(!this.isAttached){if(parentEl=m.view(this._parentViewId),1==this.createDOMElement){parentEl.insertAdjacentHTML("beforeend",m.constructContainerBaseElement(this.id));var e=this.element;m.hideElement(e),this.createDOMContent()}this.enabled=!0,this.visible=!0,this.isAttached=!0,this.dispatchEvent(g.ATTACHED_EVENT)}}},{key:"detach",value:function(){if(this.isAttached){var e=this.componentElement;e.parentNode.removeChild(e),this.isAttached=!1,this.dispatchEvent(g.DETACHED_EVENT)}}},{key:"refresh",value:function(){}},{key:"destroy",value:function(){}},{key:"containerElement",get:function(){var e=null;return this.isAttached&&(e=m.container(this.id,this.parentViewId)),e}},{key:"parent",get:function(){return this._parentViewId}},{key:"enabled",get:function(){return this.isEnabled},set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isEnabled=e}},{key:"visible",get:function(){var e=this.containerElement;return m.isVisible(e)},set:function(e){var t=this.containerElement;e?m.showElement(t):m.hideElement(t)}}]),t}(d),I=function(e){function t(){var e,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Class";n(this,t);for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return i=l(this,(e=o(t)).call.apply(e,[this].concat(s))),Error.captureStackTrace&&Error.captureStackTrace(v(i),t),i.type=r,i.date=new Date,i}return a(t,e),t}(c(Error)),C=function(e){function t(e,i,r){var a;return n(this,t),(a=l(this,o(t).call(this))).id=e,a.route=i,a.parentId=r,a.viewStack=[],a.isRendered=!1,a.initViewStack(),a}return a(t,e),r(t,[{key:"initViewStack",value:function(){}},{key:"pushViewElement",value:function(e,t){for(var n in t){var i=t[n];i.isActive&&i.deActivateView()}this.viewStack.push(e)}},{key:"popViewElement",value:function(){this.viewStack.pop()}},{key:"getActiveViewId",value:function(){if(this.viewStack.length>0)return this.viewStack[this.viewStack.length-1]}},{key:"getViewStackElement",value:function(){var e=null;return this.isRendered&&(e=this.getViewStackRootElement()),e}},{key:"getViewStackRootElement",value:function(){return m.viewStack(this.id)}},{key:"render",value:function(){this.isRendered||(this.renderViewStack(),this.renderViewStackContent(),this.isRendered=!0)}},{key:"renderViewStack",value:function(){var e=m.viewNavigator(this.parentId),t=m.constructViewStackBaseElement(this.id);e.insertAdjacentHTML("beforeend",t)}},{key:"renderViewStackContent",value:function(){}},{key:"destroy",value:function(){this.route=null,this.viewStack=[],this.isRendered=!1;var e=m.viewNavigator(this.parentId),t=m.viewStack(this.id);e.removeChild(t),this.parentId=null,this.id=null}}]),t}(d),R=function(e){function t(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n(this,t),(i=l(this,o(t).call(this))).id=e,i.parentId=r,i.parentContId=a,i.activeViewId=null,i.activeViewStackId=null,i.activeRoute=null,i.views={},i.viewstacks={},i.eventRoute=new f,i.isRendered=!1,i.navigationHistory=!0,i.initNavigator(),i}return a(t,e),r(t,[{key:"initNavigator",value:function(){}},{key:"createView",value:function(e,t,n,i){return new b(e,t,n,i)}},{key:"createViewStack",value:function(e,t,n){return new C(e,t,n)}},{key:"navigate",value:function(e,t,n){var i;0==this.navigationHistory&&this.navigateBack(e),i=this.eventRoute.findViewStackId(t,e);var r=this.getViewStack(i);null==r&&(r=this.createViewStack(i,e,this.id)),r.render(),this.activeViewStackId=i,this.viewstacks[i]=r;var a=this.eventRoute.findViewId(t,e),o=this.getView(a);null==o&&(o=this.createView(a,e,t,n,i)),this.removeActiveMenuElement();var s=r.getViewStackElement();this.activeViewId=a,this.views[a]=o,this.activeRoute=e,o.attachView(s),r.pushViewElement(a,this.views),o.activateView(),this.setActiveMenuElement(t)}},{key:"navigateBack",value:function(e){if(e==this.activeRoute){var t=this.getViewStack(this.activeViewStackId);t.popViewElement();var n=this.views[this.activeViewId];if(n.deActivateView(),n.detachView(),n.destroy(),this.removeActiveMenuElement(),n=null,this.views[this.activeViewId]=null,delete this.views[this.activeViewId],1==this.navigationHistory){this.activeViewId=t.getActiveViewId(),this.views[this.activeViewId].activateView();var i=this.views[this.activeViewId].navEvent;this.setActiveMenuElement(i),this.activeRoute=this.views[this.activeViewId].route}}}},{key:"navigateBackToView",value:function(e){}},{key:"navigateToView",value:function(e){}},{key:"removeActiveMenuElement",value:function(){}},{key:"setActiveMenuElement",value:function(e){}},{key:"getViewStack",value:function(e){return this.viewstacks[e]}},{key:"getView",value:function(e){return this.views[e]}},{key:"render",value:function(){this.isRendered||(this.renderNavigator(),this.renderNavigatorContent())}},{key:"renderNavigator",value:function(){var e=this.parentId,t=null;if(null==(t="root"!=this.parentId?m.container(this.parentContainer,this.parentId):document.getElementById(e)))throw new ClassError("ViewNavigator","No Parent Element found for Navigator");var n=m.constructNavigatorBaseElement(this.id);t.insertAdjacentHTML("beforeend",n),this.isRendered=!0}},{key:"renderNavigatorContent",value:function(){}},{key:"destroy",value:function(){for(var e in this.views){this.views[e].destroy()}for(var t in this.viewstacks){this.viewstacks[t].destroy()}var n=m.viewNavigator(this.id);n.parentNode.removeChild(n),this.views=null,this.viewstacks=null,this.parentId=null,this.id=null,this.parentId=null,this.parentContId=null,this.activeViewId=null,this.activeViewStackId=null,this.activeRoute=null,this.eventRoute=null,this.isRendered=!1}},{key:"history",get:function(){return this.navigationHistory},set:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.navigationHistory=e}},{key:"parentContainer",get:function(){return this.parentContId}},{key:"eventRouter",set:function(e){if(!e instanceof f)throw new ClassError("ViewNavigator","Wrong Type of Router");this.eventRoute=e},get:function(){return this.eventRoute}}]),t}(d),_=function(e){function t(){var e;return n(this,t),(e=l(this,o(t).call(this))).preinitialize(),e.initialize(),e}return a(t,e),r(t,[{key:"preinitialize",value:function(){var e=this;this.router=new y,this.rootId="root",this.navigators={},this.currentRouteNavArray=[],this.currentRoute=null,k.navEventChannel.addEventListener(g.NAV_CHANGE_EVENT,(function(t){e.handleNavChangeEvent(t)}))}},{key:"initialize",value:function(){}},{key:"createNavigator",value:function(e,t,n){return new R(e,t,n)}},{key:"addNavigator",value:function(e,t){this.navigators[t]=e}},{key:"addNavIdRoute",value:function(e,t){var n={route:e,navId:t};this.currentRouteNavArray.push(n)}},{key:"getNavigator",value:function(e){var t=null;return null!=this.navigators[e]&&(t=this.navigators[e]),t}},{key:"findRouteNavigator",value:function(e){return this.router.findNavigator(e)}},{key:"getNavigatorParent",value:function(e){return this.router.findNavigatorParent(e)}},{key:"getParentNavContainer",value:function(e,t){var n=this.rootId;if(t!=this.rootId){var i=e.split("/");i.shift(),i.splice(i.length-1,1);for(var r=[],a=0;a<i.length;a++)r[a]="/"+i[a];for(var o=r.toString(),s=null,u=0;u<this.currentRouteNavArray.length;u++){this.currentRouteNavArray[u].route==o&&(s=this.currentRouteNavArray[u].navId)}n=this.navigators[s].getView(t).getNavContainerId()}return n}},{key:"handleNavChangeEvent",value:function(e){var t=e.route,n=e.eventName,i=e.params;this.changeNavigation(t,n,i)}},{key:"changeNavigation",value:function(e,t,n){var i=e,r=this.findRouteNavigator(e);if(t==g.BACK_NAV_EVENT)this.changeBackNavigation(r,e);else if(null==this.currentRoute&&0==this.currentRouteNavArray.length)this.currentRoute=i,this.changeForwardNavigation(r,i,t,n);else{var a=this.chkNewRouteHaveCurrentRoute(i);if(this.currentRoute!=i&&0==a.length){for(var o=[],s=this.currentRouteNavArray.length-1;s>=0;s--)o.push(this.currentRouteNavArray[s].navId);this.destroyUnusedNavigators(o),this.currentRouteNavArray=[],this.currentRoute=i,this.changeForwardNavigation(r,i,t,n)}else this.chkAndDestroyNestedNavs(i),this.currentRoute=i,this.changeForwardNavigation(r,i,t,n)}}},{key:"chkNewRouteHaveCurrentRoute",value:function(e){var t=e.split("/");t.shift();var n=this.currentRoute.split("/");return n.shift(),n.filter((function(e){return t.includes(e)}))}},{key:"changeBackNavigation",value:function(e,t){if(e.length>0)for(var n=0;n<e.length;n++){var i=e[n],r=this.getNavigator(i);1==r.history&&r.navigateBack(t)}}},{key:"changeForwardNavigation",value:function(e,t,n,i){if(e.length>0)for(var r=0;r<e.length;r++){var a=e[r],o=this.getNavigator(a);if(null==o){var s=this.getNavigatorParent(a),u=this.getParentNavContainer(t,s);o=this.createNavigator(a,s,u),this.addNavigator(o,a),this.addNavIdRoute(t,a),o.render()}o.navigate(t,n,i)}}},{key:"chkAndDestroyNestedNavs",value:function(e){var t=this.findRouteNavigator(e),n=[],i=[];if(t.length>0)for(var r=0;r<t.length;r++){var a=t[r];if(null!=this.navigators[a]){var o=this.navigators[a].activeViewId;0==this.navigators[a].history&&n.push(o)}}if(n.length>0)for(var s=0;s<n.length;s++){var u=n[s],c=this.chkViewAsNavigatorParent(u);null!=c&&i.push(c)}i.length>0&&(this.destroyUnusedNavigators(i),this.delNavFromCurrRouteArr(i))}},{key:"delNavFromCurrRouteArr",value:function(e){for(var t=e.length;t>=0;){for(var n=0;n<this.currentRouteNavArray.length;n++){this.currentRouteNavArray[n].navId==e[t]&&this.currentRouteNavArray.splice(n,1)}t--}}},{key:"chkViewAsNavigatorParent",value:function(e){var t=null;for(var n in this.navigators)if(null!=this.navigators[n]){var i=this.navigators[n].parentId;null!=i&&i==e&&(t=this.navigators[n].id)}return t}},{key:"destroyUnusedNavigators",value:function(e){if(e.length>0)for(var t=0;t<e.length;t++){var n=e[t];this.removeNavigator(n)}}},{key:"removeNavigator",value:function(e){var t=this.navigators[e];t.destroy(),t=null,this.navigators[e]=null}},{key:"destroyAll",value:function(){}},{key:"routes",set:function(e){if(!e instanceof y)throw new I("ViewManager","Wrong Type of Router");this.router=e},get:function(){return this.router}}]),t}(d),S=function(e){function t(e,i,r,a,s){var u;return n(this,t),(u=l(this,o(t).call(this,e,a,s))).type=e,u.eventName=i,u.params=r,u}return a(t,e),r(t,[{key:"clone",value:function(){return new t(this.type,this.eventName,this.params,this.bubbles,this.cancelable)}}]),t}(h),T=new(function(){function e(){return n(this,e),e.instance||(e.instance=this,this.BindObjDictionary={},this.objCounter=0,this.bindObjIdPrefix="bindobj"),e.instance}return r(e,[{key:"Binds",value:function(e,t,n,i,r){var a=new Object,o=t+"prop",s=null;this.objCounter++;var u=this.bindObjIdPrefix+this.objCounter;e.nodeName?(s=u,e.dataset.bindid=s,this.addToBindDictionary(s,e,n),a=this.BindObjDictionary[s]):(s=u,e.bindid=s,this.addToBindDictionary(s,e,n),a=this.BindObjDictionary[s]),null==a.srcPropArray&&(a.srcPropArray=[]),null==a[o]&&(a.srcPropArray.push(t),a[o]=new Object,"function"==typeof e[t]?a[o].value=e[t]():a[o].value=e[t]),null==a[o].bindObjArray&&(a[o].bindObjArray=[]);var c=this.getTargetObject(i,r);a[o].bindObjArray.push(c),this.BindObjDictionary[s]=a}},{key:"addToBindDictionary",value:function(e,t,n){var i=this;null==this.BindObjDictionary[e]&&(this.BindObjDictionary[e]=t),t.addEventListener(n,(function(e){i.synchronise(e)}))}},{key:"synchronise",value:function(e){e.preventDefault();var n,i=e.target;console.info(t(i)),n=i.bindid?i.bindid:i.dataset.bindid;for(var r=this.BindObjDictionary[n],a=r.srcPropArray.length,o=0;o<a;o++){var s=r.srcPropArray[o],u=s+"prop",c=void 0;c="function"==typeof r[s]?r[s]():r[s],r[u].value!=c&&(this.synchroniseTargetObj(r,u,s),r[u].value=r[s])}}},{key:"synchroniseTargetObj",value:function(e,t,n){for(var i=e[t].bindObjArray,r=i.length,a=0;a<r;a++){var o=i[a],s=void 0;s="function"==typeof e[n]?e[n]():e[n],null!=o.obj&&("function"==typeof o.obj[o.prop]?o.obj[o.prop](s):o.obj[o.prop]=s)}}},{key:"getTargetObject",value:function(e,t){var n=new Object;return n.obj=e,n.prop=t,n}},{key:"addBinding",value:function(e,t,n,i,r,a){this.Binds(e,t,n,i,r),a&&this.Binds(i,r,n,e,t)}},{key:"removeBinding",value:function(e,t){var n;if(null!=e){if(e.nodeName){var i=e.dataset.bindid;null!=this.BindObjDictionary[i]?(n=this.BindObjDictionary[i],this.removeListeners(n)):(n=this.BindObjDictionary[srcObj.bindid],this.removeListeners(n))}else null!=this.BindObjDictionary[srcObj.bindid]&&(n=this.BindObjDictionary[srcObj.bindid],this.removeListeners(n));if(n.srcPropArray.length>0)for(var r=n.srcPropArray.length,a=0;a<r;a++){n[n.srcPropArray[a]+"prop"].bindObjArray=[]}}}},{key:"removeListeners",value:function(e,t){var n=this;e.removeEventListener(t,(function(e){n.synchronise(e)}))}}]),e}());
/** 
   * @license
   * Copyright (c) 2019 Gaurang Lade
   * 
   * MIT License
   * 
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in all
   * copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
   */e.BindingUtils=T,e.ClassError=I,e.Component=V,e.Container=A,e.ElementState=N,e.ElementUtils=m,e.Event=h,e.EventBroadCaster=k,e.EventChannel=p,e.EventDispatcher=d,e.EventRouter=f,e.EventUtils=g,e.GenericEvent=S,e.InstanceId=w,e.NavigationEvent=E,e.Router=y,e.View=b,e.ViewManager=_,e.ViewNavigator=R,e.ViewStack=C,Object.defineProperty(e,"__esModule",{value:!0})}));
